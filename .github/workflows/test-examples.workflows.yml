name: Test-Examples Workflow

on: [push, pull_request]

jobs:

  test-examples:

    name: Test Examples
    
    strategy:
      matrix:
        os: [windows-latest, ubuntu-latest, macos-latest]
        java-version: [11, 12, 13, 14, 15]

    runs-on: ${{ matrix.os }}

    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK
        uses: actions/setup-java@v1
        with:
          java-version: ${{ matrix.java-version }}

      # Distributed Counter
      - name: Distributed Counter - Servlet Stack
        run: mvn --batch-mode --update-snapshots verify
        working-directory: ./test-examples/distributed-counter/servlet-stack
      - name: Distributed Counter - Reactive Stack
        run: mvn --batch-mode --update-snapshots verify
        working-directory: ./test-examples/distributed-counter/reactive-stack

      # More examples must be here
      # ...
